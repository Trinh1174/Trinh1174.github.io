<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc ti·∫øng Vi·ªát</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="title-bar">
		<h1>H·ªçc ti·∫øng Vi·ªát</h1>
		<a href="index.html" class="button-link home-button">üè†</a>
	</div>

	<div class="switch-bar">
        <button id="btn-heure" class="switch-btn active">Heure</button>
        <button id="btn-dates" class="switch-btn">Dates</button>
        <button id="btn-autres" class="switch-btn">Autres</button>
    </div>

    <div class="clock-container">
        <div class="clock-block">
            <div id="clock">
                <div id="hour-hand" class="hand hour-hand" title="Cliquer pour bouger les aiguilles"></div>
                <div id="minute-hand" class="hand minute-hand" title="Cliquer pour bouger les aiguilles"></div>
                <div id="second-hand" class="hand second-hand" title="Cliquer pour bouger les aiguilles"></div>
                <div id="center-dot"></div>
            </div>
            <div id="time-text" contenteditable="true" spellcheck="false" title="Cliquer pour modifier l'heure (format HH:MM:SS)"></div>
        </div>
        <div class="text-block">
            <div id="vietnamese-text" class="vietnamese-time"></div>
        </div>
    </div>

	<div class="date-container" style="display: none;">
        <div class="calendar-wrapper">
          <!-- 1) En-t√™te du mois en vietnamien + boutons de navigation -->
          <div class="cal-header">
            <button id="prev-month">&laquo;</button>
            <h3 id="month-year"></h3>
            <button id="next-month">&raquo;</button>
          </div>
      
          <!-- 2) Tableau des jours (lun ‚Üí dim) -->
          <table class="cal-table">
            <thead>
              <tr>
                <th>MON</th>
                <th>TUE</th>
                <th>WED</th>
                <th>THU</th>
                <th>FRI</th>
                <th>SAT</th>
                <th>SUN</th>
              </tr>
            </thead>
            <tbody id="calendar-body">
              <!-- Le JavaScript injectera ici les <tr><td>‚Ä¶</td></tr> -->
            </tbody>
          </table>
      
          <!-- 3) Sous le calendrier, la phrase en vietnamien qui s‚Äôaffiche
                 d√®s qu‚Äôon clique sur un jour -->
          <p id="date-display" class="vietnamese-date"></p>
        </div>
    </div>

    <div class="autres-container" style="display:none;">
        <div class="text-block">
            <p>üöß En cours de d√©veloppement üöß</p>
        </div>
    </div>

    <script>

		function showSection(section) {
            document.querySelector('.clock-container').style.display = section === 'heure' ? '' : 'none';
            document.querySelector('.date-container').style.display = section === 'dates' ? '' : 'none';
            document.querySelector('.autres-container').style.display = section === 'autres' ? '' : 'none';

            document.getElementById('btn-heure').classList.toggle('active', section === 'heure');
            document.getElementById('btn-dates').classList.toggle('active', section === 'dates');
            document.getElementById('btn-autres').classList.toggle('active', section === 'autres');
        }

        document.getElementById('btn-heure').onclick = () => showSection('heure');
        document.getElementById('btn-dates').onclick = () => showSection('dates');
        document.getElementById('btn-autres').onclick = () => showSection('autres');

        // HEURE
        let customTime = null;
        let isEditingTime = false;

        function updateClock() {
            if (isEditingTime) return;

            const now = customTime || new Date();
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            const hourDeg = (hours * 30) + (minutes * 0.5);
            const minuteDeg = (minutes * 6) + (seconds * 0.1);
            const secondDeg = seconds * 6;

            document.getElementById('hour-hand').style.transform = `translate(-50%, -100%) rotate(${hourDeg}deg)`;
            document.getElementById('minute-hand').style.transform = `translate(-50%, -100%) rotate(${minuteDeg}deg)`;
            document.getElementById('second-hand').style.transform = `translate(-50%, -100%) rotate(${secondDeg}deg)`;

            const pad = (num) => String(num).padStart(2, '0');
            const timeText = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
            document.getElementById('time-text').textContent = timeText;

            const fullHour = now.getHours();
            const minute = now.getMinutes();
            const second = now.getSeconds();

            const vietnameseHours = [
                "M∆∞·ªùi hai", "M·ªôt", "Hai", "Ba", "B·ªën", "NƒÉm",
                "S√°u", "B·∫£y", "T√°m", "Ch√≠n", "M∆∞·ªùi", "M∆∞·ªùi m·ªôt"
            ];

            const vietnameseMinutes = [
                "kh√¥ng", "m·ªôt", "hai", "ba", "b·ªën", "nƒÉm", "s√°u", "b·∫£y", "t√°m", "ch√≠n",
                "m∆∞·ªùi", "m∆∞·ªùi m·ªôt", "m∆∞·ªùi hai", "m∆∞·ªùi ba", "m∆∞·ªùi b·ªën", "m∆∞·ªùi lƒÉm",
                "m∆∞·ªùi s√°u", "m∆∞·ªùi b·∫£y", "m∆∞·ªùi t√°m", "m∆∞·ªùi ch√≠n", "hai m∆∞∆°i", "hai m∆∞∆°i m·ªët",
                "hai m∆∞∆°i hai", "hai m∆∞∆°i ba", "hai m∆∞∆°i t∆∞", "hai m∆∞∆°i lƒÉm", "hai m∆∞∆°i s√°u",
                "hai m∆∞∆°i b·∫£y", "hai m∆∞∆°i t√°m", "hai m∆∞∆°i ch√≠n", "ba m∆∞∆°i", "ba m∆∞∆°i m·ªët",
                "ba m∆∞∆°i hai", "ba m∆∞∆°i ba", "ba m∆∞∆°i t∆∞", "ba m∆∞∆°i lƒÉm", "ba m∆∞∆°i s√°u",
                "ba m∆∞∆°i b·∫£y", "ba m∆∞∆°i t√°m", "ba m∆∞∆°i ch√≠n", "b·ªën m∆∞∆°i", "b·ªën m∆∞∆°i m·ªët",
                "b·ªën m∆∞∆°i hai", "b·ªën m∆∞∆°i ba", "b·ªën m∆∞∆°i t∆∞", "b·ªën m∆∞∆°i lƒÉm", "b·ªën m∆∞∆°i s√°u",
                "b·ªën m∆∞∆°i b·∫£y", "b·ªën m∆∞∆°i t√°m", "b·ªën m∆∞∆°i ch√≠n", "nƒÉm m∆∞∆°i", "nƒÉm m∆∞∆°i m·ªët",
                "nƒÉm m∆∞∆°i hai", "nƒÉm m∆∞∆°i ba", "nƒÉm m∆∞∆°i t∆∞", "nƒÉm m∆∞∆°i lƒÉm", "nƒÉm m∆∞∆°i s√°u",
                "nƒÉm m∆∞∆°i b·∫£y", "nƒÉm m∆∞∆°i t√°m", "nƒÉm m∆∞∆°i ch√≠n"
            ];

            const vietnameseSeconds = vietnameseMinutes;

            // Determine time of day
            let timeOfDay = "";
            if (fullHour >= 0 && fullHour < 5) {
                timeOfDay = "ƒë√™m";
            } else if (fullHour >= 5 && fullHour < 11) {
                timeOfDay = "s√°ng";
            } else if (fullHour >= 11 && fullHour < 13) {
                timeOfDay = "tr∆∞a";
            } else if (fullHour >= 13 && fullHour < 18) {
                timeOfDay = "chi·ªÅu";
            } else if (fullHour >= 18 && fullHour < 22) {
                timeOfDay = "t·ªëi";
            } else {
                timeOfDay = "ƒë√™m";
            }

            // Get 12-hour display
            let displayHour = fullHour % 12;
            if (displayHour === 0) displayHour = 12;
            const nextHour = (displayHour % 12) + 1;

            let vietnameseHour = vietnameseHours[displayHour % 12];
            const vietnameseNextHour = vietnameseHours[nextHour % 12];
            const vietnameseMinute = vietnameseMinutes[minute];
            const vietnameseSecond = vietnameseSeconds[second];

            // Special case: n·ª≠a ƒë√™m
            const isMidnight = fullHour === 0 && minute === 0 && second === 0;
            if (isMidnight) {
                vietnameseHour = "N·ª≠a ƒë√™m";
            }

            // === Full formal version ===
            let vietnameseTextFull = `<strong>${vietnameseHour}</strong> gi·ªù`;
            if (minute > 0) vietnameseTextFull += ` <strong>${vietnameseMinute}</strong> ph√∫t`;
            if (second > 0) vietnameseTextFull += ` <strong>${vietnameseSecond}</strong> gi√¢y`;
            vietnameseTextFull += ` ${timeOfDay}.`;

            // === Spoken version ===
            let vietnameseTextSpoken = "";
            if (minute === 30) {
                vietnameseTextSpoken = `<strong>${vietnameseHour}</strong> gi·ªù <strong>r∆∞·ª°i</strong>`;
            } else if (minute === 45) {
                vietnameseTextSpoken = `<strong>${vietnameseNextHour}</strong> gi·ªù <strong>k√©m ${vietnameseMinutes[15]}</strong>`;
            } else if (minute === 50) {
                vietnameseTextSpoken = `<strong>${vietnameseNextHour}</strong> gi·ªù <strong>k√©m ${vietnameseMinutes[10]}</strong>`;
            } else if (minute === 55) {
                vietnameseTextSpoken = `<strong>${vietnameseNextHour}</strong> gi·ªù <strong>k√©m ${vietnameseMinutes[5]}</strong>`;
            } else {
                vietnameseTextSpoken = `<strong>${vietnameseHour}</strong> gi·ªù`;
                if (minute > 0) vietnameseTextSpoken += ` <strong>${vietnameseMinute}</strong> ph√∫t`;
            }
            if (second > 0) vietnameseTextSpoken += ` <strong>${vietnameseSecond}</strong> gi√¢y`;
            vietnameseTextSpoken += ` ${timeOfDay}.`;

            // === Display block with stable layout ===
            const block = document.getElementById('vietnamese-text');

            if (vietnameseTextFull === vietnameseTextSpoken) {
                block.innerHTML = `
                    <div style="min-height: 1.6em;">
                        ${vietnameseTextFull}
                    </div>
                    <div style="visibility: hidden; height: 1.6em;">
                        (invisible filler)
                    </div>`;
            } else {
                block.innerHTML = `
                    <div><em>ƒê·∫ßy ƒë·ªß:</em> ${vietnameseTextFull}</div>
                    <div><em>Th√¢n m·∫≠t:</em> ${vietnameseTextSpoken}</div>`;
            }
        }

        function rotateHand(event, handId) {
            const clock = document.getElementById('clock');
            const rect = clock.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const angle = Math.atan2(event.clientY - centerY, event.clientX - centerX) * (180 / Math.PI) + 90;
            const normalizedAngle = (angle + 360) % 360;

            document.getElementById(handId).style.transform = `translate(-50%, -100%) rotate(${normalizedAngle}deg)`;

            customTime = customTime || new Date();

            if (handId === 'hour-hand') {
                const hours = Math.round(normalizedAngle / 30) % 12;
                customTime.setHours(hours);
            } else if (handId === 'minute-hand') {
                const minutes = Math.round(normalizedAngle / 6) % 60;
                customTime.setMinutes(minutes);
            } else if (handId === 'second-hand') {
                const seconds = Math.round(normalizedAngle / 6) % 60;
                customTime.setSeconds(seconds);
            }

            updateClock();
        }

        ['hour-hand', 'minute-hand', 'second-hand'].forEach((id) => {
            document.getElementById(id).addEventListener('mousedown', (event) => {
                customTime = customTime || new Date();
                const moveHandler = (e) => rotateHand(e, id);
                document.addEventListener('mousemove', moveHandler);
                document.addEventListener('mouseup', () => {
                    document.removeEventListener('mousemove', moveHandler);
                }, { once: true });
            });
        });

        const timeInput = document.getElementById('time-text');

        // User starts editing: pause updates
        timeInput.addEventListener('focus', () => {
            isEditingTime = true;
        });

        // On blur or Enter: apply changes and resume updates
        function parseManualTime() {
            const text = timeInput.textContent.trim();
            const match = text.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);

            if (match) {
                const h = parseInt(match[1]);
                const m = parseInt(match[2]);
                const s = parseInt(match[3]);

                if (
                    h >= 0 && h <= 23 &&
                    m >= 0 && m <= 59 &&
                    s >= 0 && s <= 59
                ) {
                    customTime = new Date();
                    customTime.setHours(h, m, s);
                }
            }

            isEditingTime = false;
            updateClock(); // always reflect parsed time
        }

        timeInput.addEventListener('blur', parseManualTime);

        timeInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault(); // prevent new line
                timeInput.blur();   // triggers parse + resume
            }
        });


        setInterval(() => {
            if (!customTime) {
                updateClock();
            }
        }, 1000);
        updateClock();
        
    </script>

    <script>
        // 1) Jours de la semaine en vietnamien (0 = dimanche ‚Ä¶ 6 = samedi)
        const vietnameseWeekdays = [
        "Ch·ªß Nh·∫≠t",
        "Th·ª© Hai",
        "Th·ª© Ba",
        "Th·ª© T∆∞",
        "Th·ª© NƒÉm",
        "Th·ª© S√°u",
        "Th·ª© B·∫£y"
        ];
    
        // 2) Mois en vietnamien (d√©j√† pr√©fix√©s par "Th√°ng ...")
        const monthNamesVietnamese = [
        "Th√°ng M·ªôt",
        "Th√°ng Hai",
        "Th√°ng Ba",
        "Th√°ng T∆∞",
        "Th√°ng NƒÉm",
        "Th√°ng S√°u",
        "Th√°ng B·∫£y",
        "Th√°ng T√°m",
        "Th√°ng Ch√≠n",
        "Th√°ng M∆∞·ªùi",
        "Th√°ng M∆∞·ªùi M·ªôt",
        "Th√°ng M∆∞·ªùi Hai"
        ];
    
        // 3) Variables globales pour suivre le mois et l‚Äôann√©e affich√©s
        let currentYear, currentMonth; // currentMonth : 0 = janvier ‚Ä¶ 11 = d√©cembre
    
        // 4) R√©f√©rences aux √©l√©ments DOM
        const monthYearElem = document.getElementById("month-year");
        const calendarBody   = document.getElementById("calendar-body");
        const prevBtn        = document.getElementById("prev-month");
        const nextBtn        = document.getElementById("next-month");
        const dateDisplay    = document.getElementById("date-display");
    
        // 5) Initialisation d√®s que la page est compl√®tement charg√©e
        document.addEventListener("DOMContentLoaded", function() {
        // R√©cup√©rer la date d‚Äôaujourd‚Äôhui
        const today = new Date();
        currentYear  = today.getFullYear();
        currentMonth = today.getMonth();
    
        // Construire le calendrier pour le mois/ann√©e actuels
        buildCalendar(currentYear, currentMonth);
    
        // √âcouteurs sur les fl√®ches ‚Äú‚Äπ‚Äù et ‚Äú‚Ä∫‚Äù
        prevBtn.addEventListener("click", () => {
            currentMonth--;
            if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
            }
            buildCalendar(currentYear, currentMonth);
        });
        nextBtn.addEventListener("click", () => {
            currentMonth++;
            if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
            }
            buildCalendar(currentYear, currentMonth);
        });
        });
    
        // 6) Fonction pour g√©n√©rer la grille du mois donn√© (year, month)
        function buildCalendar(year, month) {
        // 6.1) Purge l‚Äôancien contenu
        calendarBody.innerHTML = "";
    
        // 6.2) Mettre √† jour l‚Äôen-t√™te (mois en VIETNAMIEN, en majuscules)
        //    Exemple : monthNamesVietnamese[5] = "Th√°ng S√°u" ‚Üí on uppercase ‚Üí "TH√ÅNG S√ÅU"
        monthYearElem.textContent = `${monthNamesVietnamese[month].toUpperCase()} ${year}`;
    
        // 6.3) Calculer le jour de la semaine correspondant au 1er du mois
        // getDay() ‚Üí 0 = dimanche ‚Ä¶ 6 = samedi
        let firstDay = new Date(year, month, 1).getDay();
        // Nous voulons ‚ÄúLundi = 0, Mardi = 1, ‚Ä¶, Dimanche = 6‚Äù. 
        // Si firstDay == 0 (dimanche), on passe √† 6 ; sinon on fait -1.
        firstDay = (firstDay === 0) ? 6 : (firstDay - 1);
    
        // 6.4) Calculer le nombre de jours dans ce mois
        const daysInMonth = new Date(year, month + 1, 0).getDate();
    
        // 6.5) D√©terminer combien de cases (cellules) totales on doit cr√©er 
        //      pour remplir un multiplet de 7 cases, y compris les ‚Äúblanches‚Äù
        let dateCounter = 1;
        const totalCells = Math.ceil((firstDay + daysInMonth) / 7) * 7;
    
        // 6.6) Boucler sur chaque cellule pour g√©n√©rer lignes (<tr>) et colonnes (<td>)
        for (let cellIndex = 0; cellIndex < totalCells; cellIndex++) {
            if (cellIndex % 7 === 0) {
            // Cr√©e une nouvelle ligne tous les 7 √©l√©ments
            var row = document.createElement("tr");
            calendarBody.appendChild(row);
            }
    
            const cellElem = document.createElement("td");
    
            // Si on est avant le premier jour OU apr√®s la fin du mois ‚Üí case vide
            if (cellIndex < firstDay || dateCounter > daysInMonth) {
            cellElem.classList.add("blank");
            cellElem.textContent = ""; 
            } else {
            // Sinon, c‚Äôest un num√©ro de jour valide  
            cellElem.textContent = dateCounter;
    
            // S‚Äôil s‚Äôagit du jour ‚Äúaujourd‚Äôhui‚Äù, on lui ajoute la classe ‚Äútoday‚Äù
            const today = new Date();
            if (
                dateCounter === today.getDate() &&
                month === today.getMonth() &&
                year === today.getFullYear()
            ) {
                cellElem.classList.add("today");
            }
    
            // √Ä chaque cellule valide, on associe un listener pour g√©rer le clic
            (function(d, m, y) {
                cellElem.addEventListener("click", function() {
                selectDate(d, m, y, cellElem);
                });
            })(dateCounter, month, year);
    
            dateCounter++;
            }
    
            // Ajoute la cellule (vide ou chiffr√©e) √† la ligne en cours
            row.appendChild(cellElem);
        }
        }
    
        // 7) Fonction appel√©e quand on clique sur une date (d, m, y)
        function selectDate(d, m, y, cellElem) {
        // 7.1) Retirer ‚Äúselected‚Äù de la case qui en avait d√©j√†
        const prevSel = document.querySelector(".cal-table tbody .selected");
        if (prevSel) {
            prevSel.classList.remove("selected");
        }
    
        // 7.2) Ajouter ‚Äúselected‚Äù √† la cellule cliqu√©e
        cellElem.classList.add("selected");
    
        // 7.3) Construire la phrase vietnamienne du type :
        // ‚ÄúTh·ª© S√°u, ng√†y 06 th√°ng 06 nƒÉm 2025‚Äù
        const clickedDate = new Date(y, m, d);
        const weekdayIndex = clickedDate.getDay(); // 0 = dimanche
    
        const vietText = 
            `${vietnameseWeekdays[weekdayIndex]}, ng√†y ${d} th√°ng ${m + 1} nƒÉm ${y}`;
    
        // 7.4) Injecter dans le <p id="date-display">
        dateDisplay.textContent = vietText;
        }
    </script>
  
  
</body>
</html>